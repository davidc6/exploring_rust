# Rust in C


### Project notes

- In order to statically link our Rust library, we need to tell `rustc` to emit a static library. This is done by setting a flag in `Cargo.toml` - `crate-type = ["staticlib"]`.
- `#[no_mangle]` - disable symbol mangling which will enables native code linkers to interpret Rust code correctly.
- `#[repr(C)]` - guarantee C layout and ABI

### Files/modules definitions

- `rust-code/src/wrapper.rs` - a wrapper code from which a C header file gets generated
- `rust-code/src/lib.rs` - Rust code that implements a "Person" and some simple functionality
- `rust-code/include/bindings.h` - C headers generated from the Rust code (this gets generated by cbindgen)

### Reading material

- Rust FFI and bindgen: Integrating Embedded C Code in Rust - https://dev.to/apollolabsbin/rust-ffi-and-bindgen-integrating-embedded-c-code-in-rust-26j6
- Foreign Function Interface (FFI) - https://anssi-fr.github.io/rust-guide/07_ffi.html
- Rustonomicon FFI - https://doc.rust-lang.org/nomicon/ffi.html
- 7 ways to pass a string between Rust and C - https://dev.to/kgrech/7-ways-to-pass-a-string-between-rust-and-c-4ieb
- Convert String to CStr and back in rust - https://dev.to/socrateslee/convert-string-to-cstr-and-back-in-rust-1617
- Type Layout - https://doc.rust-lang.org/reference/type-layout.html
